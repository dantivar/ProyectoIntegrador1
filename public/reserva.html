<dom-module id="reserva-app" atribute="usr">
	<template>
		<h1> Hola {{usr}} </h1>
		<div class="input-group">
	      <input type="text" class="form-control" placeholder="DD/MM/AAAA" aria-label="DD/MM/AAAA" aria-describedby="sizing-addon2" id="fecha">
	      <input type="text" class="form-control" placeholder="Aula" aria-label="Aula" aria-describedby="sizing-addon2" id="aula">
	      <input type="text" class="form-control" placeholder="HH:MM" aria-label="HH:MM" aria-describedby="sizing-addon2" id="hora">
	  	</div>
  	<button on-click="reserva">Reservar</button>
  	<pre id="object"></pre>
	</template>
	<script>
		Polymer({
			is : 'reserva-app',
			ready : function(){
				const config = {
					apiKey: "AIzaSyBmSeRTYbYqMLwJGzk-urpuMzEcQqmcT4Q",
				    authDomain: "rima-67b88.firebaseapp.com",
				    databaseURL: "https://rima-67b88.firebaseio.com",
				};
				firebase.initializeApp(config);
				var query = window.location.search;
			      if (query.substring(0, 1) == '?') {
			        query = query.substring(1);
			      }
			      var data = query.split(',');
			      for (i = 0; (i < data.length); i++) {
			        data[i] = unescape(data[i]);
			      }
			      let usuario = data[0].substring(0,8);
			      this.usr=usuario;
			      console.log(this.usr);
			},
			reserva : function(){
				//const preObject = document.getElementById('object');
				//const dbRefObject = firebase.database().ref().child('object');
				//Sync object changes
				//dbRefObject.on('value', snap => {
					//preObject.innerText = JSON.stringify(snap.val(), null, 3);
				//});
				const firebaseRef = firebase.database().ref();
				
				let fecha = this.$.fecha.value;
				let aula = this.$.aula.value;
				let hora = this.$.hora.value;

				firebaseRef.child(this.usr).child("fecha").set(fecha);
				firebaseRef.child(this.usr).child("aula").set(aula);
				firebaseRef.child(this.usr).child("hora").set(hora);
			}
		});
	</script>
</dom-module>